--[[██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                        				 Custom  PZ  Mod  Developer  for  Hire													  |
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                       	Portfolio:  https://steamcommunity.com/id/glytch3r/myworkshopfiles/							          |
|                       		                                    														 	  |
|                       	Discord:    Glytch3r#1337 / glytch3r															      |
|                       		                                    														 	  |
|                       	Support:    https://ko-fi.com/glytch3r														    	  |
|_______________________________________________________________________________________________________________________________-]]
--[[_____________________________________________________________________________________________________________________________
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████--]]


require "lua_timers"
DogZedMod = DogZedMod or {}

function DogZedMod.isShowTag()
    return SandboxVars.DogZedMod.ShowTag or getCore():getDebug()
end

function DogZedMod.isTagEmpty(targ)
    return tostring(targ:getChildSprites())  == '[]'
end
function DogZedMod.isHasTag(targ)
    return not DogZedMod.isTagEmpty(targ)
end


function DogZedMod.removeTag(targ)
    targ:clearAttachedAnimSprite()
end




function DogZedMod.setTag(targ, int)

    if DogZedMod.isShowTag() then
        if targ then
            if DogZedMod.isDogChar(targ) then

                if int == nil then
                    int = DogZedMod.getOutfitNum(targ) or DogZedMod.getAdminSkinNum(targ)

                    if int == 2 then
                        if SandboxVars.DogZedMod.SameShadowCloneTag then
                            int = 1
                        end
                    end

                end

                if DogZedMod.isHasTag(targ) then
                    DogZedMod.removeTag(targ)
                end

                local spr = getSprite("media/ui/Tags/DogZed_tag_"..tostring(int)..".png"):newInstance()
                targ:setAttachedAnimSprite(ArrayList.new())
                local anm = targ:getAttachedAnimSprite():add(spr)

            end
        end
    end
end

function DogZedMod.clearStatsToAll()
    local zombies = getCell():getZombieList()
    if not getCell() or not zombies then return end
    for i = 0, zombies:size() - 1 do
        local zed = zombies:get(i)
        if zed and DogZedMod.isDogZed(zed) then
            zed:getModData()['DogZed_Init'] = nil
            DogZedMod.removeTag(zed)
        end
    end
end


-----------------------            ---------------------------


--[[
--[[
        local cell = getCell()
        local RadGlow = nil
        local sq = targ:getCurrentSquare()
        local x, y, z = sq:getX(), sq:getY(), sq:getZ()
        if x and y and z then
            RadGlow = IsoLightSource.new(x, y, z, 131, 246, 177,  ZombRand(0, 256))
        end
        cell:addLamppost(RadGlow)
        if RadGlow then
            cell:removeLamppost(RadGlow)
        end
 ]]
-----------------------            ---------------------------

--[[
local sq = DogZedMod.getRandSq(getPlayer():getSquare())
DogZedMod.setRadiateSq(sq)

local sq = DogZedMod.getRandSq(getPlayer():getSquare())
DogZedMod.setRadiateArea(sq)


]]

--[[
local sq = getPlayer():getSquare()
DogZedMod.getRandSq(centerPoint)

]]

--DogZedMod.setRadiateArea(getPlayer():getCurrentSquare() )




--DogZedMod.testHL(obj)




--[[
function DogZedMod.setOutline(targ, isBlink)
    if targ == nil then return end
    targ:setOutlineHighlight(true)
    targ:setOutlineHlBlink(isBlink)
    targ:setOutlineThickness(2)
    targ:setOutlineHighlightCol(131, 246, 177,  ZombRand(123, 256))
end

DogZedMod.setOutline(getPlayer(), true)
DogZedMod.addHLtoSq(getPlayer())


 ]]

--[[
function DogZedMod.RadiationMarkers(sq)
    local pl = getPlayer(); if not pl then return end
	local zombies = getCell():getObjectList()
	for i=zombies:size(),1,-1 do
		local zed = zombies:get(i-1)
		if DogZedMod.isRadiatedDog(zed) then
            if DogZedMod.isShouldRadiate(zed, pl) then
                local sq = zed:getSquare()
                if sq then
                    DogZedMod.addHLtoSq(sq)
                end
            end
		end
	end
end
Events.OnClockUpdate.Remove(DogZedMod.RadiationMarkers)
Events.OnClockUpdate.Add(DogZedMod.RadiationMarkers)


 ]]







-----------------------            ---------------------------
--[[
function DogZedMod.dayShift(timeOfDay)
    if timeOfDay == "Day" then
		if getCore():getDebug() then
			print("DogZedMod: It's now daytime!")
		end
		DogZedMod.setStatsToAll()
    elseif timeOfDay == "Night" then

		if getCore():getDebug() then
			print("DogZedMod: It's now nighttime!")
		end
		DogZedMod.setStatsToAll()
    end
end

Events.OnDayTimeChange.Add(DogZedMod.dayShift)
Events.EveryTenMinutes.Add(DogZedMod.checkDayTimeChange)


function DogZedMod.checkDayTimeChange()
    if not DogZedMod.lastDayTime then
        DogZedMod.lastDayTime = DogZedMod.getDayTime()
    end

    local currentDayTime = DogZedMod.getDayTime()

    if currentDayTime ~= DogZedMod.lastDayTime then
        triggerEvent("OnDayTimeChange", currentDayTime)
        DogZedMod.lastDayTime = currentDayTime
    end
end

 ]]