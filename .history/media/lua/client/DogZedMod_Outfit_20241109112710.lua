--[[██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                        				 Custom  PZ  Mod  Developer  for  Hire													  |
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                       	Portfolio:  https://steamcommunity.com/id/glytch3r/myworkshopfiles/							          |
|                       		                                    														 	  |
|                       	Discord:    Glytch3r#1337 / glytch3r															      |
|                       		                                    														 	  |
|                       	Support:    https://ko-fi.com/glytch3r														    	  |
|_______________________________________________________________________________________________________________________________-]]
--[[_____________________________________________________________________________________________________________________________
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████--]]

require "lua_timers"

DogZedMod = DogZedMod or {}

DogZedMod.outfit0 = "RadiatedDog"
DogZedMod.outfit1 = "ShadowDog"
DogZedMod.outfit2 = "CloneDog"


function DogZedMod.isDogZed(zed, isPhysical)
    if not zed or not instanceof(zed, "IsoZombie") then
        return false
    end

    local fit = tostring(zed:getOutfitName())

    if isPhysical ~= false then
        if fit == DogZedMod.outfit0 or fit == DogZedMod.outfit1 then
            return true
        end
    end

    return fit == DogZedMod.outfit2 and not isPhysical
end


function DogZedMod.setOutfit(zed, outfitNum)
    local wearNum = DogZedMod.getOutfitNum(zed)
    if wearNum ~= outfitNum then
        if outfitNum == 1 then
            zed:dressInNamedOutfit(DogZedMod.outfit1)
        elseif outfitNum == 2 then
            zed:dressInNamedOutfit(DogZedMod.outfit2)
        elseif outfitNum == 0 then
            zed:dressInNamedOutfit(DogZedMod.outfit0)
        end
        zed:resetModelNextFrame()
		DogZedMod.setTag(zed, outfitNum)
    end
end


----------------------- get*           ---------------------------
function DogZedMod.getOutfitNum(zed)
	if not zed then return nil end
	local fit = tostring(zed:getOutfitName())
	if fit == DogZedMod.outfit0 then return 0 end
	if fit == DogZedMod.outfit1 then return 1 end
	if fit == DogZedMod.outfit2 then return 2 end
	return nil
end



function DogZedMod.getOutfitName(zed)
	if not zed then return nil end
	local fit = tostring(zed:getOutfitName())
	if fit == DogZedMod.outfit0 then return "RadiatedDog" end
	if fit == DogZedMod.outfit1 then return "ShadowDog" end
	if fit == DogZedMod.outfit2 then return "CloneDog" end
	return nil
end

function DogZedMod.getOutfitCrawlType(zed)
	if not zed then return nil end
	local fit = tostring(zed:getOutfitName())
	if fit == DogZedMod.outfit0 then return 1 end
	if fit == DogZedMod.outfit1 then return 1 end
	if fit == DogZedMod.outfit2 then return 2 end
	return nil
end






function DogZedMod.isOutfitNum(zed, int)
	if not zed then return false end
	local fit = tostring(zed:getOutfitName())
	if int == 1 then
		if fit == DogZedMod.outfit1 then return true end
	elseif int == 2 then
		if fit == DogZedMod.outfit2 then return true end
	elseif int == 0 then
		if fit == DogZedMod.outfit0 then return true end
	end
	return false
end

-----------------------            ---------------------------
--[[
local num = DogZedMod.getOutfitNum(zed)
if num == 0 then
    AnimSpeed =  tonumber(DogZedMod.getRadiatedDogAnimSpeed())
else
    AnimSpeed =  tonumber(DogZedMod.getShadowDogAnimSpeed())
end
 ]]
-----------------------     is*       ---------------------------
--DogZedMod.setCrawler(dbgZed)

function DogZedMod.isRadiatedDog(zed)
	if not zed then return false end
	return tostring(zed:getOutfitName()) == DogZedMod.outfit0
end
function DogZedMod.isShadowDog(zed)
	if not zed then return false end
	return tostring(zed:getOutfitName()) == DogZedMod.outfit1
end
function DogZedMod.isShadowClone(zed)
	if not zed then return false end
	return tostring(zed:getOutfitName()) == DogZedMod.outfit2
end

function DogZedMod.isPhysicalDog(zed)
	if not zed then return false end
	return DogZedMod.isShadowClone(zed)
end

-----------------------     setDogZed* set*          ---------------------------
function DogZedMod.setDogZed(zed, int)
	if not DogZedMod.isDogZed(zed) then
		local outfit = DogZedMod.outfit1


        if int == 1 then
            outfit = DogZedMod.outfit1
		elseif int == 2 then
			outfit = DogZedMod.outfit2
        elseif int == 0 then
            outfit = DogZedMod.outfit0
		end
		zed:dressInNamedOutfit(outfit)
		--zed:DoZombieInventory()
		zed:resetModelNextFrame()
		DogZedMod.setTag(zed, int)
		DogZedMod.setStats(zed)
	end
end




function DogZedMod.getFitGender(fit)
    local maleOutfits = getAllOutfits(false)
    local femaleOutfits = getAllOutfits(true)
    local allOutfits = {}

    for i = 0, maleOutfits:size() - 1 do
        table.insert(allOutfits, maleOutfits:get(i))
    end
    for i = 0, femaleOutfits:size() - 1 do
        table.insert(allOutfits, femaleOutfits:get(i))
    end

    if not fit or fit == '' then
        fit = allOutfits[ZombRand(#allOutfits) + 1]
    end

    local outfitExists = false
    for _, outfit in ipairs(allOutfits) do
        if outfit == fit then
            outfitExists = true
            break
        end
    end

    if not outfitExists then
        return nil
    end
	local isFemale = false
    if maleOutfits:contains(fit) and femaleOutfits:contains(fit) then
		if 1 == ZombRand(0, 2) then
			isFemale = true
		end
    elseif femaleOutfits:contains(fit) and not maleOutfits:contains(fit) then
		isFemale = true
    elseif not femaleOutfits:contains(fit) and maleOutfits:contains(fit) then
		isFemale = false
    end
	return isFemale
end

--[[ function DogZedMod.FitHandler(zed)
    if not zed then return end
	if not DogZedMod.isDogZed(zed) then return end

    if DogZedMod.isNight() then
        if DogZedMod.isRadiatedDog(zed) then
            DogZedMod.setOutfit(zed, 2)
        end
    elseif DogZedMod.isDay() then
        if DogZedMod.isShadowDog(zed) then
            DogZedMod.setOutfit(zed, 1)
        end
    end
	--DogZedMod.setStats(zed)
end
Events.OnZombieUpdate.Remove(DogZedMod.FitHandler)
Events.OnZombieUpdate.Add(DogZedMod.FitHandler)
 ]]